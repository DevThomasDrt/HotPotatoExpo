// SystÃ¨me de thÃ¨mes simplifiÃ©s (sans sous-thÃ¨mes)
export const THEMES_DATA = {
  // ThÃ¨mes gratuits (4 dÃ©bloquÃ©s)
  animaux: {
    name: 'ðŸ¾ Animaux',
    free: true,
    questions: [
      'Nomme un animal domestique',
      'Cite un animal sauvage',
      'Quel animal miaule ?',
      'Nomme un animal de la ferme',
      'Cite un animal qui vole',
      'Nomme un poisson',
      'Cite un mammifÃ¨re marin',
      'Quel animal a huit tentacules ?',
      'Nomme un crustacÃ©',
      'Cite un animal des profondeurs',
      'Nomme un reptile',
      'Cite un animal nocturne',
      'Quel animal hiberne ?',
      'Nomme un animal de la jungle',
      'Cite un animal qui pond des Å“ufs'
    ]
  },

  nourriture: {
    name: 'ðŸ• Nourriture',
    free: true,
    questions: [
      'Nomme un fruit rouge',
      'Cite un lÃ©gume vert',
      'Quel plat mange-t-on avec des baguettes ?',
      'Nomme une pÃ¢tisserie franÃ§aise',
      'Cite un fromage franÃ§ais',
      'Nomme un fruit tropical',
      'Cite un fruit Ã  noyau',
      'Quel fruit est jaune et courbÃ© ?',
      'Nomme un dessert au chocolat',
      'Cite une glace parfumÃ©e',
      'Nomme une boisson chaude',
      'Cite un cocktail cÃ©lÃ¨bre',
      'Nomme un plat italien',
      'Cite une spÃ©cialitÃ© japonaise',
      'Quel plat vient du Mexique ?'
    ]
  },

  films: {
    name: 'ðŸŽ¬ Films & SÃ©ries',
    free: true,
    questions: [
      'Nomme un film avec des super-hÃ©ros',
      'Cite un film d\'animation Disney',
      'Quel film a gagnÃ© l\'Oscar cette annÃ©e ?',
      'Nomme un acteur franÃ§ais cÃ©lÃ¨bre',
      'Cite une saga de films',
      'Nomme une princesse Disney',
      'Cite un mÃ©chant Disney',
      'Nomme un film Pixar',
      'Nomme une sÃ©rie Netflix populaire',
      'Cite une sÃ©rie avec des zombies',
      'Quelle sÃ©rie se passe Ã  Hawkins ?',
      'Nomme un film de zombie',
      'Cite un personnage effrayant',
      'Nomme un rÃ©alisateur cÃ©lÃ¨bre',
      'Cite une comÃ©die franÃ§aise'
    ]
  },

  sport: {
    name: 'âš½ Sport',
    free: true,
    questions: [
      'Nomme un sport d\'Ã©quipe',
      'Cite un sport olympique',
      'Quel sport se joue avec une raquette ?',
      'Nomme un sport de combat',
      'Cite un sport aquatique',
      'Nomme un joueur de football cÃ©lÃ¨bre',
      'Cite une Ã©quipe de Ligue 1',
      'Quel pays a gagnÃ© la derniÃ¨re Coupe du Monde ?',
      'Nomme un sport d\'hiver',
      'Cite une Ã©preuve d\'athlÃ©tisme',
      'Nomme un sport de glisse',
      'Cite un sport aÃ©rien',
      'Nomme un champion olympique',
      'Cite un sport de vitesse',
      'Nomme une discipline de gymnastique'
    ]
  },

  // ThÃ¨mes premium (verrouillÃ©s)
  musique: {
    name: 'ðŸŽµ Musique',
    free: false,
    questions: [
      'Nomme un instrument Ã  cordes',
      'Cite un chanteur franÃ§ais',
      'Quel instrument a des touches noires et blanches ?',
      'Nomme un groupe de rock',
      'Cite un style de musique',
      'Nomme un chanteur pop international',
      'Cite un groupe de rock cÃ©lÃ¨bre',
      'Nomme un compositeur cÃ©lÃ¨bre',
      'Cite un opÃ©ra connu',
      'Nomme un rappeur franÃ§ais',
      'Cite un rappeur amÃ©ricain',
      'Nomme un festival de musique',
      'Cite une chanson des Beatles',
      'Nomme un instrument Ã  vent',
      'Cite un album cÃ©lÃ¨bre'
    ]
  },

  geographie: {
    name: 'ðŸŒ GÃ©ographie',
    free: false,
    questions: [
      'Nomme un continent',
      'Cite une capitale europÃ©enne',
      'Quel est le plus grand ocÃ©an ?',
      'Nomme une chaÃ®ne de montagnes',
      'Cite un fleuve cÃ©lÃ¨bre',
      'Nomme un pays d\'Asie',
      'Cite un pays d\'Afrique',
      'Quel pays a pour capitale Tokyo ?',
      'Nomme une ville amÃ©ricaine',
      'Cite une ville franÃ§aise',
      'Quelle ville abrite la Tour Eiffel ?',
      'Nomme un monument parisien',
      'Cite une merveille du monde',
      'Nomme un chÃ¢teau franÃ§ais',
      'Cite un monument amÃ©ricain'
    ]
  },

  histoire: {
    name: 'ðŸ“š Histoire',
    free: false,
    questions: [
      'Nomme un roi de France',
      'Cite une guerre mondiale',
      'Quel empereur a conquis l\'Europe ?',
      'Nomme une rÃ©volution cÃ©lÃ¨bre',
      'Cite un pharaon Ã©gyptien',
      'Nomme un empereur romain',
      'Cite une bataille cÃ©lÃ¨bre',
      'Quel siÃ¨cle Ã©tait le Moyen Ã‚ge ?',
      'Nomme un explorateur cÃ©lÃ¨bre',
      'Cite une civilisation antique',
      'Nomme un prÃ©sident franÃ§ais',
      'Cite un Ã©vÃ©nement du 20e siÃ¨cle',
      'Nomme un chÃ¢teau mÃ©diÃ©val',
      'Cite une invention importante',
      'Nomme un personnage historique'
    ]
  },

  science: {
    name: 'ðŸ”¬ Science',
    free: false,
    questions: [
      'Nomme un Ã©lÃ©ment chimique',
      'Cite une planÃ¨te du systÃ¨me solaire',
      'Quel gaz respirons-nous ?',
      'Nomme un scientifique cÃ©lÃ¨bre',
      'Cite une invention moderne',
      'Nomme un organe du corps humain',
      'Cite une maladie connue',
      'Quel est l\'organe qui pompe le sang ?',
      'Nomme un animal prÃ©historique',
      'Cite une source d\'Ã©nergie',
      'Nomme une constellation',
      'Cite un phÃ©nomÃ¨ne naturel',
      'Nomme un mÃ©tal prÃ©cieux',
      'Cite une unitÃ© de mesure',
      'Nomme une thÃ©orie scientifique'
    ]
  },

  technologie: {
    name: 'ðŸ’» Technologie',
    free: false,
    questions: [
      'Nomme un rÃ©seau social',
      'Cite une marque de smartphone',
      'Quel systÃ¨me d\'exploitation utilise Apple ?',
      'Nomme un moteur de recherche',
      'Cite une plateforme de streaming',
      'Nomme un langage de programmation',
      'Cite une entreprise tech',
      'Quel appareil sert Ã  naviguer sur internet ?',
      'Nomme une console de jeux',
      'Cite un jeu vidÃ©o cÃ©lÃ¨bre',
      'Nomme une application mobile',
      'Cite un service de cloud',
      'Nomme un navigateur web',
      'Cite une cryptomonnaie',
      'Nomme une intelligence artificielle'
    ]
  },

  litterature: {
    name: 'ðŸ“– LittÃ©rature',
    free: false,
    questions: [
      'Nomme un Ã©crivain franÃ§ais',
      'Cite un livre cÃ©lÃ¨bre',
      'Quel auteur a Ã©crit Harry Potter ?',
      'Nomme un poÃ¨te franÃ§ais',
      'Cite une piÃ¨ce de thÃ©Ã¢tre',
      'Nomme un personnage de roman',
      'Cite un conte de fÃ©es',
      'Quel Ã©crivain a Ã©crit "1984" ?',
      'Nomme une saga littÃ©raire',
      'Cite un prix littÃ©raire',
      'Nomme un hÃ©ros de BD',
      'Cite un journal cÃ©lÃ¨bre',
      'Nomme un genre littÃ©raire',
      'Cite un auteur de science-fiction',
      'Nomme une maison d\'Ã©dition'
    ]
  },

  mode: {
    name: 'ðŸ‘— Mode & Style',
    free: false,
    questions: [
      'Nomme une marque de luxe',
      'Cite un vÃªtement d\'Ã©tÃ©',
      'Quel accessoire porte-t-on au poignet ?',
      'Nomme un styliste cÃ©lÃ¨bre',
      'Cite une couleur tendance',
      'Nomme un type de chaussures',
      'Cite un tissu naturel',
      'Quel vÃªtement porte-t-on pour dormir ?',
      'Nomme un parfum cÃ©lÃ¨bre',
      'Cite un dÃ©filÃ© de mode',
      'Nomme une capitale de la mode',
      'Cite un magazine de mode',
      'Nomme un bijou prÃ©cieux',
      'Cite un style vestimentaire',
      'Nomme une matiÃ¨re de luxe'
    ]
  },

  voyage: {
    name: 'âœˆï¸ Voyage & Tourisme',
    free: false,
    questions: [
      'Nomme une destination exotique',
      'Cite un moyen de transport',
      'Quel document faut-il pour voyager ?',
      'Nomme un hÃ´tel de luxe',
      'Cite une compagnie aÃ©rienne',
      'Nomme une Ã®le paradisiaque',
      'Cite un site touristique',
      'Quel continent visiter en safari ?',
      'Nomme une ville romantique',
      'Cite une activitÃ© de vacances',
      'Nomme un parc d\'attractions',
      'Cite une croisiÃ¨re cÃ©lÃ¨bre',
      'Nomme un guide de voyage',
      'Cite une application de voyage',
      'Nomme un type d\'hÃ©bergement'
    ]
  },

  nature: {
    name: 'ðŸŒ¿ Nature & Environnement',
    free: false,
    questions: [
      'Nomme un arbre fruitier',
      'Cite une fleur colorÃ©e',
      'Quel phÃ©nomÃ¨ne cause la pluie ?',
      'Nomme un parc national',
      'Cite un animal en voie de disparition',
      'Nomme une saison de l\'annÃ©e',
      'Cite un phÃ©nomÃ¨ne mÃ©tÃ©o',
      'Quel gaz produit l\'effet de serre ?',
      'Nomme une source d\'Ã©nergie verte',
      'Cite un Ã©cosystÃ¨me naturel',
      'Nomme un minÃ©ral prÃ©cieux',
      'Cite une catastrophe naturelle',
      'Nomme un insecte utile',
      'Cite une plante mÃ©dicinale',
      'Nomme un ocÃ©an de la planÃ¨te'
    ]
  },

  art: {
    name: 'ðŸŽ¨ Art & Culture',
    free: false,
    questions: [
      'Nomme un peintre cÃ©lÃ¨bre',
      'Cite un musÃ©e parisien',
      'Quel artiste a peint la Joconde ?',
      'Nomme une sculpture cÃ©lÃ¨bre',
      'Cite un mouvement artistique',
      'Nomme un instrument de musique',
      'Cite une danse traditionnelle',
      'Quel matÃ©riau utilise un sculpteur ?',
      'Nomme un thÃ©Ã¢tre cÃ©lÃ¨bre',
      'Cite un festival culturel',
      'Nomme un style architectural',
      'Cite une technique de peinture',
      'Nomme un opÃ©ra cÃ©lÃ¨bre',
      'Cite un artiste contemporain',
      'Nomme une galerie d\'art'
    ]
  },

  metiers: {
    name: 'ðŸ‘· MÃ©tiers & Professions',
    free: false,
    questions: [
      'Nomme un mÃ©tier mÃ©dical',
      'Cite un mÃ©tier artistique',
      'Quel mÃ©tier enseigne aux enfants ?',
      'Nomme un mÃ©tier du bÃ¢timent',
      'Cite un mÃ©tier de la restauration',
      'Nomme un mÃ©tier du sport',
      'Cite un mÃ©tier de la mode',
      'Quel mÃ©tier rÃ©pare les voitures ?',
      'Nomme un mÃ©tier de la justice',
      'Cite un mÃ©tier de l\'informatique',
      'Nomme un mÃ©tier de la sÃ©curitÃ©',
      'Cite un mÃ©tier du spectacle',
      'Nomme un mÃ©tier de l\'agriculture',
      'Cite un mÃ©tier de la communication',
      'Nomme un mÃ©tier de la finance'
    ]
  }
};

// ThÃ¨mes personnalisÃ©s (stockÃ©s localement)
export const CUSTOM_THEMES_KEY = '@HotPotato:customThemes';

// Fonction pour obtenir les thÃ¨mes disponibles selon le statut premium
export const getAvailableThemes = async (isPremium = false, premiumService = null) => {
  const standardThemes = [];
  
  // Inclure TOUS les thÃ¨mes, mÃªme ceux premium (pour les afficher verrouillÃ©s)
  Object.keys(THEMES_DATA).forEach(themeKey => {
    const theme = THEMES_DATA[themeKey];
    standardThemes.push({
      key: themeKey,
      ...theme,
      type: 'standard',
      locked: !theme.free && !isPremium // Marquer comme verrouillÃ© si premium et pas d'accÃ¨s
    });
  });
  
  // Ajouter les thÃ¨mes personnalisÃ©s si premium
  if (isPremium && premiumService) {
    try {
      const customThemes = await premiumService.getCustomThemes();
      const customThemeObjects = customThemes.map(customTheme => ({
        key: `custom_${customTheme.id}`,
        name: customTheme.name,
        free: false,
        type: 'custom',
        customId: customTheme.id,
        questions: customTheme.questions,
        locked: false
      }));
      
      return [...standardThemes, ...customThemeObjects];
    } catch (error) {
      console.error('Erreur lors du chargement des thÃ¨mes personnalisÃ©s:', error);
    }
  }

  return standardThemes;
};

// Fonction pour obtenir une question alÃ©atoire d'un thÃ¨me
export const getRandomQuestion = (themeKey) => {
  // GÃ©rer les thÃ¨mes personnalisÃ©s
  if (themeKey.startsWith('custom_')) {
    return "Nomme quelque chose de cool !";
  }
  
  const theme = THEMES_DATA[themeKey];
  if (!theme || !theme.questions) {
    return "Nomme quelque chose de cool !";
  }
  
  const questions = theme.questions;
  return questions[Math.floor(Math.random() * questions.length)];
};

// Fonction pour obtenir des questions alÃ©atoires d'un thÃ¨me
export const getRandomQuestions = async (themeKey, count = 50, premiumService = null) => {
  // GÃ©rer les thÃ¨mes personnalisÃ©s
  if (themeKey.startsWith('custom_') && premiumService) {
    try {
      const customThemes = await premiumService.getCustomThemes();
      const customId = themeKey.replace('custom_', '');
      const customTheme = customThemes.find(theme => theme.id === customId);
      
      if (customTheme && customTheme.questions) {
        const shuffled = [...customTheme.questions].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, Math.min(count, customTheme.questions.length));
      }
    } catch (error) {
      console.error('Erreur lors du chargement des questions personnalisÃ©es:', error);
    }
    return [];
  }

  // GÃ©rer les thÃ¨mes standards
  const theme = THEMES_DATA[themeKey];
  if (!theme || !theme.questions) {
    return [];
  }

  const questions = theme.questions;
  const shuffled = [...questions].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(count, questions.length));
};