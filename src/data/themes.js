// Syst√®me de th√®mes simplifi√©s (sans sous-th√®mes)
export const THEMES_DATA = {
  // Th√®mes gratuits (4 d√©bloqu√©s)
  animaux: {
    name: 'üêæ Animaux',
    free: true,
    questions: [
      'Nomme un animal domestique',
      'Cite un animal sauvage',
      'Quel animal miaule ?',
      'Nomme un animal de la ferme',
      'Cite un animal qui vole',
      'Nomme un poisson',
      'Cite un mammif√®re marin',
      'Quel animal a huit tentacules ?',
      'Nomme un crustac√©',
      'Cite un animal des profondeurs',
      'Nomme un reptile',
      'Cite un animal nocturne',
      'Quel animal hiberne ?',
      'Nomme un animal de la jungle',
      'Cite un animal qui pond des ≈ìufs'
    ]
  },

  nourriture: {
    name: 'üçï Nourriture',
    free: true,
    questions: [
      'Nomme un fruit rouge',
      'Cite un l√©gume vert',
      'Quel plat mange-t-on avec des baguettes ?',
      'Nomme une p√¢tisserie fran√ßaise',
      'Cite un fromage fran√ßais',
      'Nomme un fruit tropical',
      'Cite un fruit √† noyau',
      'Quel fruit est jaune et courb√© ?',
      'Nomme un dessert au chocolat',
      'Cite une glace parfum√©e',
      'Nomme une boisson chaude',
      'Cite un cocktail c√©l√®bre',
      'Nomme un plat italien',
      'Cite une sp√©cialit√© japonaise',
      'Quel plat vient du Mexique ?'
    ]
  },

  films: {
    name: 'üé¨ Films & S√©ries',
    free: true,
    questions: [
      'Nomme un film avec des super-h√©ros',
      'Cite un film d\'animation Disney',
      'Quel film a gagn√© l\'Oscar cette ann√©e ?',
      'Nomme un acteur fran√ßais c√©l√®bre',
      'Cite une saga de films',
      'Nomme une princesse Disney',
      'Cite un m√©chant Disney',
      'Nomme un film Pixar',
      'Nomme une s√©rie Netflix populaire',
      'Cite une s√©rie avec des zombies',
      'Quelle s√©rie se passe √† Hawkins ?',
      'Nomme un film de zombie',
      'Cite un personnage effrayant',
      'Nomme un r√©alisateur c√©l√®bre',
      'Cite une com√©die fran√ßaise'
    ]
  },

  sport: {
    name: '‚öΩ Sport',
    free: true,
    questions: [
      'Nomme un sport d\'√©quipe',
      'Cite un sport olympique',
      'Quel sport se joue avec une raquette ?',
      'Nomme un sport de combat',
      'Cite un sport aquatique',
      'Nomme un joueur de football c√©l√®bre',
      'Cite une √©quipe de Ligue 1',
      'Quel pays a gagn√© la derni√®re Coupe du Monde ?',
      'Nomme un sport d\'hiver',
      'Cite une √©preuve d\'athl√©tisme',
      'Nomme un sport de glisse',
      'Cite un sport a√©rien',
      'Nomme un champion olympique',
      'Cite un sport de vitesse',
      'Nomme une discipline de gymnastique'
    ]
  },

  // Th√®mes premium (verrouill√©s)
  musique: {
    name: 'üéµ Musique',
    free: false,
    questions: [
      'Nomme un instrument √† cordes',
      'Cite un chanteur fran√ßais',
      'Quel instrument a des touches noires et blanches ?',
      'Nomme un groupe de rock',
      'Cite un style de musique',
      'Nomme un chanteur pop international',
      'Cite un groupe de rock c√©l√®bre',
      'Nomme un compositeur c√©l√®bre',
      'Cite un op√©ra connu',
      'Nomme un rappeur fran√ßais',
      'Cite un rappeur am√©ricain',
      'Nomme un festival de musique',
      'Cite une chanson des Beatles',
      'Nomme un instrument √† vent',
      'Cite un album c√©l√®bre'
    ]
  },

  geographie: {
    name: 'üåç G√©ographie',
    free: false,
    questions: [
      'Nomme un continent',
      'Cite une capitale europ√©enne',
      'Quel est le plus grand oc√©an ?',
      'Nomme une cha√Æne de montagnes',
      'Cite un fleuve c√©l√®bre',
      'Nomme un pays d\'Asie',
      'Cite un pays d\'Afrique',
      'Quel pays a pour capitale Tokyo ?',
      'Nomme une ville am√©ricaine',
      'Cite une ville fran√ßaise',
      'Quelle ville abrite la Tour Eiffel ?',
      'Nomme un monument parisien',
      'Cite une merveille du monde',
      'Nomme un ch√¢teau fran√ßais',
      'Cite un monument am√©ricain'
    ]
  },

  histoire: {
    name: 'üìö Histoire',
    free: false,
    questions: [
      'Nomme un roi de France',
      'Cite une guerre mondiale',
      'Quel empereur a conquis l\'Europe ?',
      'Nomme une r√©volution c√©l√®bre',
      'Cite un pharaon √©gyptien',
      'Nomme un empereur romain',
      'Cite une bataille c√©l√®bre',
      'Quel si√®cle √©tait le Moyen √Çge ?',
      'Nomme un explorateur c√©l√®bre',
      'Cite une civilisation antique',
      'Nomme un pr√©sident fran√ßais',
      'Cite un √©v√©nement du 20e si√®cle',
      'Nomme un ch√¢teau m√©di√©val',
      'Cite une invention importante',
      'Nomme un personnage historique'
    ]
  },

  science: {
    name: 'üî¨ Science',
    free: false,
    questions: [
      'Nomme un √©l√©ment chimique',
      'Cite une plan√®te du syst√®me solaire',
      'Quel gaz respirons-nous ?',
      'Nomme un scientifique c√©l√®bre',
      'Cite une invention moderne',
      'Nomme un organe du corps humain',
      'Cite une maladie connue',
      'Quel est l\'organe qui pompe le sang ?',
      'Nomme un animal pr√©historique',
      'Cite une source d\'√©nergie',
      'Nomme une constellation',
      'Cite un ph√©nom√®ne naturel',
      'Nomme un m√©tal pr√©cieux',
      'Cite une unit√© de mesure',
      'Nomme une th√©orie scientifique'
    ]
  },

  technologie: {
    name: 'üíª Technologie',
    free: false,
    questions: [
      'Nomme un r√©seau social',
      'Cite une marque de smartphone',
      'Quel syst√®me d\'exploitation utilise Apple ?',
      'Nomme un moteur de recherche',
      'Cite une plateforme de streaming',
      'Nomme un langage de programmation',
      'Cite une entreprise tech',
      'Quel appareil sert √† naviguer sur internet ?',
      'Nomme une console de jeux',
      'Cite un jeu vid√©o c√©l√®bre',
      'Nomme une application mobile',
      'Cite un service de cloud',
      'Nomme un navigateur web',
      'Cite une cryptomonnaie',
      'Nomme une intelligence artificielle'
    ]
  },

  litterature: {
    name: 'üìñ Litt√©rature',
    free: false,
    questions: [
      'Nomme un √©crivain fran√ßais',
      'Cite un livre c√©l√®bre',
      'Quel auteur a √©crit Harry Potter ?',
      'Nomme un po√®te fran√ßais',
      'Cite une pi√®ce de th√©√¢tre',
      'Nomme un personnage de roman',
      'Cite un conte de f√©es',
      'Quel √©crivain a √©crit "1984" ?',
      'Nomme une saga litt√©raire',
      'Cite un prix litt√©raire',
      'Nomme un h√©ros de BD',
      'Cite un journal c√©l√®bre',
      'Nomme un genre litt√©raire',
      'Cite un auteur de science-fiction',
      'Nomme une maison d\'√©dition'
    ]
  },

  mode: {
    name: 'üëó Mode & Style',
    free: false,
    questions: [
      'Nomme une marque de luxe',
      'Cite un v√™tement d\'√©t√©',
      'Quel accessoire porte-t-on au poignet ?',
      'Nomme un styliste c√©l√®bre',
      'Cite une couleur tendance',
      'Nomme un type de chaussures',
      'Cite un tissu naturel',
      'Quel v√™tement porte-t-on pour dormir ?',
      'Nomme un parfum c√©l√®bre',
      'Cite un d√©fil√© de mode',
      'Nomme une capitale de la mode',
      'Cite un magazine de mode',
      'Nomme un bijou pr√©cieux',
      'Cite un style vestimentaire',
      'Nomme une mati√®re de luxe'
    ]
  },

  voyage: {
    name: '‚úàÔ∏è Voyage & Tourisme',
    free: false,
    questions: [
      'Nomme une destination exotique',
      'Cite un moyen de transport',
      'Quel document faut-il pour voyager ?',
      'Nomme un h√¥tel de luxe',
      'Cite une compagnie a√©rienne',
      'Nomme une √Æle paradisiaque',
      'Cite un site touristique',
      'Quel continent visiter en safari ?',
      'Nomme une ville romantique',
      'Cite une activit√© de vacances',
      'Nomme un parc d\'attractions',
      'Cite une croisi√®re c√©l√®bre',
      'Nomme un guide de voyage',
      'Cite une application de voyage',
      'Nomme un type d\'h√©bergement'
    ]
  },

  nature: {
    name: 'üåø Nature & Environnement',
    free: false,
    questions: [
      'Nomme un arbre fruitier',
      'Cite une fleur color√©e',
      'Quel ph√©nom√®ne cause la pluie ?',
      'Nomme un parc national',
      'Cite un animal en voie de disparition',
      'Nomme une saison de l\'ann√©e',
      'Cite un ph√©nom√®ne m√©t√©o',
      'Quel gaz produit l\'effet de serre ?',
      'Nomme une source d\'√©nergie verte',
      'Cite un √©cosyst√®me naturel',
      'Nomme un min√©ral pr√©cieux',
      'Cite une catastrophe naturelle',
      'Nomme un insecte utile',
      'Cite une plante m√©dicinale',
      'Nomme un oc√©an de la plan√®te'
    ]
  },

  art: {
    name: 'üé® Art & Culture',
    free: false,
    questions: [
      'Nomme un peintre c√©l√®bre',
      'Cite un mus√©e parisien',
      'Quel artiste a peint la Joconde ?',
      'Nomme une sculpture c√©l√®bre',
      'Cite un mouvement artistique',
      'Nomme un instrument de musique',
      'Cite une danse traditionnelle',
      'Quel mat√©riau utilise un sculpteur ?',
      'Nomme un th√©√¢tre c√©l√®bre',
      'Cite un festival culturel',
      'Nomme un style architectural',
      'Cite une technique de peinture',
      'Nomme un op√©ra c√©l√®bre',
      'Cite un artiste contemporain',
      'Nomme une galerie d\'art'
    ]
  },

  metiers: {
    name: 'üë∑ M√©tiers & Professions',
    free: false,
    questions: [
      'Nomme un m√©tier m√©dical',
      'Cite un m√©tier artistique',
      'Quel m√©tier enseigne aux enfants ?',
      'Nomme un m√©tier du b√¢timent',
      'Cite un m√©tier de la restauration',
      'Nomme un m√©tier du sport',
      'Cite un m√©tier de la mode',
      'Quel m√©tier r√©pare les voitures ?',
      'Nomme un m√©tier de la justice',
      'Cite un m√©tier de l\'informatique',
      'Nomme un m√©tier de la s√©curit√©',
      'Cite un m√©tier du spectacle',
      'Nomme un m√©tier de l\'agriculture',
      'Cite un m√©tier de la communication',
      'Nomme un m√©tier de la finance'
    ]
  }
};

// Th√®mes personnalis√©s (stock√©s localement)
export const CUSTOM_THEMES_KEY = '@HotPotato:customThemes';

// Fonction pour obtenir les th√®mes disponibles selon le statut premium
export const getAvailableThemes = async (isPremium = false, premiumService = null) => {
  const standardThemes = [];
  
  // Inclure TOUS les th√®mes, m√™me ceux premium (pour les afficher verrouill√©s)
  Object.keys(THEMES_DATA).forEach(themeKey => {
    const theme = THEMES_DATA[themeKey];
    standardThemes.push({
      key: themeKey,
      ...theme,
      type: 'standard',
      locked: !theme.free && !isPremium // Marquer comme verrouill√© si premium et pas d'acc√®s
    });
  });
  
  // Ajouter les th√®mes personnalis√©s si premium
  if (isPremium && premiumService) {
    try {
      const customThemes = await premiumService.getCustomThemes();
      const customThemeObjects = customThemes.map(customTheme => ({
        key: `custom_${customTheme.id}`,
        name: customTheme.name,
        free: false,
        type: 'custom',
        customId: customTheme.id,
        questions: customTheme.questions,
        locked: false
      }));
      
      return [...standardThemes, ...customThemeObjects];
    } catch (error) {
      console.error('Erreur lors du chargement des th√®mes personnalis√©s:', error);
    }
  }

  return standardThemes;
};

// Fonction pour obtenir une question al√©atoire d'un th√®me
export const getRandomQuestion = (themeKey) => {
  // G√©rer les th√®mes personnalis√©s
  if (themeKey.startsWith('custom_')) {
    return "Nomme quelque chose de cool !";
  }
  
  const theme = THEMES_DATA[themeKey];
  if (!theme || !theme.questions) {
    return "Nomme quelque chose de cool !";
  }
  
  const questions = theme.questions;
  return questions[Math.floor(Math.random() * questions.length)];
};

// Fonction pour obtenir des questions al√©atoires d'un th√®me
export const getRandomQuestions = async (themeKey, count = 50, premiumService = null) => {
  // G√©rer les th√®mes personnalis√©s
  if (themeKey.startsWith('custom_') && premiumService) {
    try {
      const customThemes = await premiumService.getCustomThemes();
      const customId = themeKey.replace('custom_', '');
      const customTheme = customThemes.find(theme => theme.id === customId);
      
      if (customTheme && customTheme.questions) {
        const shuffled = [...customTheme.questions].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, Math.min(count, customTheme.questions.length));
      }
    } catch (error) {
      console.error('Erreur lors du chargement des questions personnalis√©es:', error);
    }
    return [];
  }

  // G√©rer les th√®mes standards
  const theme = THEMES_DATA[themeKey];
  if (!theme || !theme.questions) {
    return [];
  }

  const questions = theme.questions;
  const shuffled = [...questions].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(count, questions.length));
};